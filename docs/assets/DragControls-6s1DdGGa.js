import{q as M,R as D,f as W,V as d,h as R,E as O}from"./OrbitControls-gPwodfKu.js";const c=new M,a=new D,u=new W,w=new d,v=new d,h=new d,j=new R;class G extends O{constructor(l,p,t){super(),t.style.touchAction="none";let r=null,n=null;const i=[],e=this;function y(){t.addEventListener("pointermove",b),t.addEventListener("pointerdown",x),t.addEventListener("pointerup",f),t.addEventListener("pointerleave",f)}function g(){t.removeEventListener("pointermove",b),t.removeEventListener("pointerdown",x),t.removeEventListener("pointerup",f),t.removeEventListener("pointerleave",f),t.style.cursor=""}function C(){g()}function F(){return l}function L(){return a}function b(s){if(e.enabled!==!1){if(P(s),a.setFromCamera(u,p),r){a.ray.intersectPlane(c,v)&&r.position.copy(v.sub(w).applyMatrix4(j)),e.dispatchEvent({type:"drag",object:r});return}if(s.pointerType==="mouse"||s.pointerType==="pen")if(i.length=0,a.setFromCamera(u,p),a.intersectObjects(l,e.recursive,i),i.length>0){const o=i[0].object;c.setFromNormalAndCoplanarPoint(p.getWorldDirection(c.normal),h.setFromMatrixPosition(o.matrixWorld)),n!==o&&n!==null&&(e.dispatchEvent({type:"hoveroff",object:n}),t.style.cursor="auto",n=null),n!==o&&(e.dispatchEvent({type:"hoveron",object:o}),t.style.cursor="pointer",n=o)}else n!==null&&(e.dispatchEvent({type:"hoveroff",object:n}),t.style.cursor="auto",n=null)}}function x(s){e.enabled!==!1&&(P(s),i.length=0,a.setFromCamera(u,p),a.intersectObjects(l,e.recursive,i),i.length>0&&(r=e.transformGroup===!0?l[0]:i[0].object,c.setFromNormalAndCoplanarPoint(p.getWorldDirection(c.normal),h.setFromMatrixPosition(r.matrixWorld)),a.ray.intersectPlane(c,v)&&(j.copy(r.parent.matrixWorld).invert(),w.copy(v).sub(h.setFromMatrixPosition(r.matrixWorld))),t.style.cursor="move",e.dispatchEvent({type:"dragstart",object:r})))}function f(){e.enabled!==!1&&(r&&(e.dispatchEvent({type:"dragend",object:r}),r=null),t.style.cursor=n?"pointer":"auto")}function P(s){const o=t.getBoundingClientRect();u.x=(s.clientX-o.left)/o.width*2-1,u.y=-(s.clientY-o.top)/o.height*2+1}y(),this.enabled=!0,this.recursive=!0,this.transformGroup=!1,this.activate=y,this.deactivate=g,this.dispose=C,this.getObjects=F,this.getRaycaster=L}}export{G as D};
